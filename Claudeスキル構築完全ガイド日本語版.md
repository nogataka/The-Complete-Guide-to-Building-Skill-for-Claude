# Claudeのためのスキル構築 完全ガイド

> 原文: [The Complete Guide to Building Skills for Claude (PDF)](https://resources.anthropic.com/hubfs/The-Complete-Guide-to-Building-Skill-for-Claude.pdf?hsLang=en)

## 目次

- [はじめに](#はじめに)
- [第1章　基礎知識](#第1章基礎知識)
- [第2章　設計と計画](#第2章設計と計画)
- [第3章　テストとイテレーション](#第3章テストとイテレーション)
- [第4章　配布と共有](#第4章配布と共有)
- [第5章　パターンとトラブルシューティング](#第5章パターンとトラブルシューティング)
- [第6章　リソースとリファレンス](#第6章リソースとリファレンス)
- [リファレンスA：クイックチェックリスト](#リファレンスaクイックチェックリスト)
- [リファレンスB：YAMLフロントマター](#リファレンスbyamlフロントマター)
- [リファレンスC：完全なスキル例](#リファレンスc完全なスキル例)

---

## はじめに

スキルとは、シンプルなフォルダとしてパッケージ化された一連の指示であり、Claudeに特定のタスクやワークフローの処理方法を教えるものです。スキルは、Claudeを自分のニーズに合わせてカスタマイズする最も強力な方法の一つです。会話のたびに好みやプロセス、専門知識を一から説明する代わりに、スキルを使えば一度Claudeに教えるだけで、毎回その恩恵を受けることができます。

スキルは再現可能なワークフローがある場合に威力を発揮します：仕様書からフロントエンドデザインを生成する、一貫した方法論でリサーチを行う、チームのスタイルガイドに沿ったドキュメントを作成する、マルチステッププロセスをオーケストレーションするなどです。スキルはClaudeの組み込み機能（コード実行やドキュメント作成）と相性が良く、MCPインテグレーションを構築している方にとっては、ツールアクセスを信頼性の高い最適化されたワークフローに変えるもう一つの強力なレイヤーとなります。

このガイドでは、効果的なスキルを構築するために知っておくべきすべてを網羅しています—計画と構造から、テストと配布まで。自分自身のため、チームのため、あるいはコミュニティのためにスキルを構築する場合でも、実践的なパターンと実例をガイド全体を通じて見つけることができます。

**学べること：**

- スキル構造の技術要件とベストプラクティス
- スタンドアロンスキルとMCP強化ワークフローのパターン
- さまざまなユースケースで効果的だったパターン
- スキルのテスト、イテレーション、配布の方法

**対象読者：**

- Claudeに特定のワークフローを一貫して実行させたい開発者
- Claudeに特定のワークフローを実行させたいパワーユーザー
- 組織全体でClaudeの動作を標準化したいチーム

### このガイドの2つの読み方

**スタンドアロンスキルを構築する場合：**「基礎知識」「設計と計画」およびカテゴリ1-2に注目してください。**MCPインテグレーションを強化する場合：**「スキル + MCP」セクションとカテゴリ3が対象です。どちらのパスも同じ技術要件を共有しますが、ユースケースに関連する部分を選んでください。

**このガイドから得られるもの：** 最終的には、1回の作業セッションで機能するスキルを構築できるようになります。skill-creatorを使って最初のスキルを構築しテストするのに、約15〜30分を見込んでください。

それでは始めましょう。

---

## 第1章　基礎知識

### スキルとは何か？

スキルとは、以下を含むフォルダです：

- **SKILL.md**（必須）：YAMLフロントマターを含むMarkdown形式の指示
- **scripts/**（任意）：実行可能なコード（Python、Bashなど）
- **references/**（任意）：必要に応じて読み込まれるドキュメント
- **assets/**（任意）：出力で使用されるテンプレート、フォント、アイコン

### コア設計原則

#### プログレッシブ・ディスクロージャー（段階的開示）

スキルは3段階のシステムを使用します：

- **第1レベル（YAMLフロントマター）：** 常にClaudeのシステムプロンプトに読み込まれます。すべてをコンテキストに読み込むことなく、各スキルをいつ使用すべきかをClaudeが判断するのに十分な情報を提供します。
- **第2レベル（SKILL.md本文）：** Claudeがそのスキルが現在のタスクに関連すると判断したときに読み込まれます。完全な指示とガイダンスが含まれます。
- **第3レベル（リンクされたファイル）：** スキルディレクトリ内にバンドルされた追加ファイルで、Claudeが必要な場合にのみナビゲートして発見できます。

このプログレッシブ・ディスクロージャーにより、専門的な知識を維持しながらトークン使用量を最小化します。

#### コンポーザビリティ

Claudeは複数のスキルを同時に読み込むことができます。あなたのスキルは他のスキルと一緒にうまく動作すべきであり、唯一の機能であることを前提としてはいけません。

#### ポータビリティ

スキルはClaude.ai、Claude Code、APIのすべてで同じように動作します。スキルを一度作成すれば、スキルが必要とする依存関係を環境がサポートしていれば、修正なしにすべてのサーフェスで動作します。

### MCPビルダー向け：スキル + コネクター

> 💡 MCPなしでスタンドアロンスキルを構築する場合は「設計と計画」にスキップしてください—後からいつでもここに戻れます。

すでに動作するMCPサーバーがある場合、難しい部分は完了しています。スキルはその上に乗る知識レイヤーであり、すでに知っているワークフローとベストプラクティスをキャプチャして、Claudeが一貫して適用できるようにします。

#### キッチンのアナロジー

MCPはプロのキッチンを提供します：ツール、材料、設備へのアクセス。

スキルはレシピを提供します：価値あるものを作るためのステップバイステップの指示。

両者が組み合わさることで、ユーザーはすべてのステップを自分で考える必要なく、複雑なタスクを達成できるようになります。

#### 連携の仕組み

| MCP（接続性） | スキル（知識） |
|---|---|
| Claudeをサービスに接続（Notion, Asana, Linearなど） | サービスを効果的に使う方法をClaudeに教える |
| リアルタイムのデータアクセスとツール呼び出しを提供 | ワークフローとベストプラクティスをキャプチャ |
| Claudeが**できること** | Claudeが**どうすべきか** |

#### MCPユーザーにとってなぜ重要か

**スキルなしの場合：**

- ユーザーはMCPを接続しても次に何をすればいいかわからない
- 「インテグレーションでXをどうするか」というサポートチケット
- 各会話がゼロから始まる
- ユーザーごとにプロンプトが異なるため結果が不安定
- 本当の問題はワークフローガイダンスなのにコネクターのせいにされる

**スキルありの場合：**

- 構築済みワークフローが必要時に自動的にアクティベート
- 一貫性のある信頼できるツール使用
- すべてのインタラクションにベストプラクティスが埋め込まれる
- インテグレーションの学習曲線が低下

---

## 第2章　設計と計画

### ユースケースから始める

コードを書く前に、スキルが実現すべき2〜3の具体的なユースケースを特定してください。

**良いユースケース定義：**

```
ユースケース：プロジェクトスプリント計画
トリガー：ユーザーが「スプリントを計画して」または「スプリントタスクを作成して」と言う
ステップ：
1. Linear（MCP経由）から現在のプロジェクトステータスを取得
2. チームのベロシティとキャパシティを分析
3. タスクの優先順位付けを提案
4. 適切なラベルと見積もりでLinearにタスクを作成
結果：タスクが作成された完全なスプリント計画
```

**自問すべきこと：**

- ユーザーは何を達成したいのか？
- それにはどんなマルチステップワークフローが必要か？
- どのツールが必要か（組み込みまたはMCP）？
- どんなドメイン知識やベストプラクティスを埋め込むべきか？

### 一般的なスキルユースケースカテゴリ

Anthropicでは、3つの一般的なユースケースを観察してきました：

#### カテゴリ1：ドキュメント＆アセット作成

**用途：** ドキュメント、プレゼンテーション、アプリ、デザイン、コードなど、一貫した高品質な出力の作成。

**実例：** frontend-designスキル（docx、pptx、xlsx、pptのスキルも参照）

> 「高いデザイン品質で、独自の本番グレードのフロントエンドインターフェースを作成する。ウェブコンポーネント、ページ、アーティファクト、ポスター、アプリケーションを構築する際に使用。」

**主要なテクニック：**

- 埋め込みのスタイルガイドとブランド基準
- 一貫した出力のためのテンプレート構造
- 最終化前の品質チェックリスト
- 外部ツール不要—Claudeの組み込み機能を使用

#### カテゴリ2：ワークフロー自動化

**用途：** 一貫した方法論が有効なマルチステッププロセス（複数のMCPサーバー間の連携を含む）。

**実例：** skill-creatorスキル

> 「新しいスキルを作成するためのインタラクティブガイド。ユースケース定義、フロントマター生成、指示の記述、バリデーションをユーザーに案内する。」

**主要なテクニック：**

- バリデーションゲート付きのステップバイステップワークフロー
- 一般的な構造のためのテンプレート
- 組み込みのレビューと改善提案
- 反復的な改良ループ

#### カテゴリ3：MCP強化

**用途：** MCPサーバーが提供するツールアクセスを強化するワークフローガイダンス。

**実例：** sentry-code-reviewスキル（Sentry提供）

> 「SentryのMCPサーバーを介したエラーモニタリングデータを使用して、GitHub Pull Requestで検出されたバグを自動的に分析し修正する。」

**主要なテクニック：**

- 複数のMCP呼び出しを順番に連携
- ドメイン専門知識の埋め込み
- ユーザーが指定する必要のあるコンテキストを提供
- 一般的なMCPの問題に対するエラーハンドリング

### 成功基準の定義

スキルが機能しているかどうかをどう判断しますか？

これらは目標値であり、正確な閾値ではなく大まかなベンチマークです。厳密さを目指しつつ、バイブスベースの評価の要素があることを受け入れてください。より堅牢な測定ガイダンスとツールを積極的に開発中です。

**定量的メトリクス：**

- **関連クエリの90%でスキルがトリガーされる**
  - 測定方法：スキルをトリガーすべき10〜20のテストクエリを実行。自動的に読み込まれる回数と明示的な呼び出しが必要な回数を追跡。
- **ワークフローがX回のツール呼び出しで完了する**
  - 測定方法：スキルの有無で同じタスクを比較。ツール呼び出し回数と合計トークン消費量をカウント。
- **ワークフローあたり失敗API呼び出しが0**
  - 測定方法：テスト実行中にMCPサーバーログを監視。リトライ率とエラーコードを追跡。

**定性的メトリクス：**

- **ユーザーが次のステップについてClaudeにプロンプトする必要がない**
  - 評価方法：テスト中にリダイレクトや明確化が必要な頻度をメモ。ベータユーザーにフィードバックを求める。
- **ユーザーの修正なしにワークフローが完了する**
  - 評価方法：同じリクエストを3〜5回実行。構造的な一貫性と品質について出力を比較。
- **セッション間で一貫した結果**
  - 評価方法：新しいユーザーが最小限のガイダンスで初回トライでタスクを達成できるか？

### 技術要件

#### ファイル構造

```
your-skill-name/
├── SKILL.md          # 必須 - メインスキルファイル
├── scripts/          # 任意 - 実行可能コード
│   ├── process_data.py   # 例
│   └── validate.sh       # 例
├── references/       # 任意 - ドキュメント
│   ├── api-guide.md      # 例
│   └── examples/         # 例
└── assets/           # 任意 - テンプレートなど
    └── report-template.md # 例
```

#### 重要なルール

**SKILL.mdの命名：**

- 正確に `SKILL.md` でなければならない（大文字小文字を区別）
- バリエーションは受け付けない（SKILL.MD, skill.md など）

**スキルフォルダの命名：**

- ケバブケースを使用：`notion-project-setup` ✅
- スペース不可：`Notion Project Setup` ❌
- アンダースコア不可：`notion_project_setup` ❌
- 大文字不可：`NotionProjectSetup` ❌

**README.mdは不要：**

- スキルフォルダ内にREADME.mdを含めない
- すべてのドキュメントはSKILL.mdまたはreferences/に配置
- 注：GitHub経由で配布する場合、人間のユーザー向けにリポジトリレベルのREADMEは必要—「配布と共有」を参照

### YAMLフロントマター：最も重要な部分

YAMLフロントマターは、Claudeがスキルを読み込むかどうかを決定する方法です。ここを正しく設定してください。

#### 最小限の必須フォーマット

```yaml
---
name: your-skill-name
description: 何をするか。ユーザーが[特定のフレーズ]を求めたときに使用。
---
```

開始に必要なのはこれだけです。

#### フィールド要件

**name（必須）：**

- ケバブケースのみ
- スペースや大文字なし
- フォルダ名と一致すべき

**description（必須）：**

- 以下の**両方**を含む必要がある：
  - スキルが何をするか
  - いつ使うか（トリガー条件）
- 1024文字以内
- XMLタグ（`<` `>`）不可
- ユーザーが言いそうな具体的なタスクを含める
- 関連するファイルタイプがあれば言及

**license（任意）：**

- スキルをオープンソースにする場合に使用
- 一般的：MIT、Apache-2.0

**compatibility（任意）：**

- 1〜500文字
- 環境要件を示す：想定プロダクト、必要なシステムパッケージ、ネットワークアクセス要件など

**metadata（任意）：**

- 任意のカスタムキー・バリューペア
- 推奨：author、version、mcp-server
- 例：

```yaml
metadata:
  author: ProjectHub
  version: 1.0.0
  mcp-server: projecthub
```

#### セキュリティ制限

**フロントマターで禁止されているもの：**

- XMLの山括弧（`<` `>`）
- 名前に「claude」または「anthropic」を含むスキル（予約済み）

**理由：** フロントマターはClaudeのシステムプロンプトに表示されます。悪意のあるコンテンツが指示を注入する可能性があります。

### 効果的なスキルの書き方

#### descriptionフィールド

Anthropicのエンジニアリングブログによると：「このメタデータは...すべてをコンテキストに読み込むことなく、各スキルをいつ使用すべきかをClaudeが判断するのに十分な情報を提供します。」これがプログレッシブ・ディスクロージャーの第1レベルです。

**構造：**

`[何をするか]` + `[いつ使うか]` + `[主要な機能]`

**良いdescriptionの例：**

```yaml
# Good - 具体的で実用的
description: Figmaデザインファイルを分析し、開発者ハンドオフドキュメントを生成する。
  ユーザーが.figファイルをアップロードしたり、「デザインスペック」
  「コンポーネントドキュメント」「デザインからコードへの引き継ぎ」を求めた場合に使用。

# Good - トリガーフレーズを含む
description: スプリント計画、タスク作成、ステータス追跡を含むLinearプロジェクト
  ワークフローを管理。ユーザーが「スプリント」「Linearタスク」「プロジェクト計画」
  に言及したり「チケットを作成」を求めた場合に使用。

# Good - 明確な価値提案
description: PayFlowのエンドツーエンド顧客オンボーディングワークフロー。
  アカウント作成、支払いセットアップ、サブスクリプション管理を処理。
  ユーザーが「新規顧客をオンボード」「サブスクリプションをセットアップ」
  「PayFlowアカウントを作成」と言った場合に使用。
```

**悪いdescriptionの例：**

```yaml
# 曖昧すぎる
description: プロジェクトを支援する。

# トリガーがない
description: 洗練されたマルチページドキュメントシステムを作成。

# 技術的すぎてユーザートリガーがない
description: 階層的関係を持つProjectエンティティモデルを実装。
```

#### メイン指示の書き方

フロントマターの後に、Markdownで実際の指示を書きます。

**推奨構造：**

このテンプレートをスキルに合わせて調整してください。括弧内のセクションを具体的な内容に置き換えてください。

```markdown
---
name: your-skill
description: [.]
---

# Your Skill Name

# Instructions

# Step 1: [最初の主要ステップ]
何が起こるかの明確な説明。

Example:
```bash
python scripts/fetch_data.py --project-id PROJECT_ID
```
Expected output: [成功の様子を説明]

（必要に応じてステップを追加）

# Examples

Example 1: [一般的なシナリオ]
User says: "新しいマーケティングキャンペーンを設定して"
Actions:
1. MCP経由で既存のキャンペーンを取得
2. 提供されたパラメータで新規キャンペーンを作成
Result: 確認リンク付きでキャンペーン作成完了

（必要に応じて例を追加）

# Troubleshooting

Error: [一般的なエラーメッセージ]
Cause: [発生理由]
Solution: [修正方法]

（必要に応じてエラーケースを追加）
```

#### 指示のベストプラクティス

**具体的で実用的に**

```
✅ Good:
`python scripts/validate.py --input {filename}` を実行してデータフォーマットをチェック。
バリデーションが失敗した場合、一般的な問題：
- 必須フィールドの欠落（CSVに追加）
- 無効な日付フォーマット（YYYY-MM-DDを使用）

❌ Bad:
進む前にデータをバリデートしてください。
```

**エラーハンドリングを含める**

```markdown
# 一般的な問題

# MCP接続失敗
「Connection refused」が表示された場合：
1. MCPサーバーが起動しているか確認：設定 > 拡張機能 を確認
2. APIキーが有効か確認
3. 再接続を試行：設定 > 拡張機能 > [サービス] > 再接続
```

**バンドルされたリソースを明確に参照**

```markdown
クエリを書く前に `references/api-patterns.md` を参照：
- レート制限ガイダンス
- ページネーションパターン
- エラーコードとハンドリング
```

**プログレッシブ・ディスクロージャーを使用**

SKILL.mdはコア指示に集中させてください。詳細なドキュメントは `references/` に移動し、リンクしてください。（3段階システムの仕組みについてはコア設計原則を参照。）

---

## 第3章　テストとイテレーション

スキルはニーズに応じてさまざまなレベルの厳密さでテストできます：

- **Claude.aiでの手動テスト** — クエリを直接実行して動作を観察。速いイテレーション、セットアップ不要。
- **Claude Codeでのスクリプトテスト** — 変更間で再現可能なバリデーションのためにテストケースを自動化。
- **スキルAPIによるプログラマティックテスト** — 定義されたテストセットに対して体系的に実行する評価スイートを構築。

品質要件とスキルの可視性に合ったアプローチを選択してください。小規模チーム内部で使用するスキルと、数千の企業ユーザーにデプロイするスキルではテストニーズが異なります。

> 💡 **プロのコツ：拡大する前に単一タスクでイテレーション**
>
> 最も効果的なスキル作成者は、Claudeが成功するまで単一の困難なタスクでイテレーションし、勝利のアプローチをスキルに抽出します。これはClaudeのインコンテキスト学習を活用し、広範なテストよりも速いシグナルを提供します。動作する基盤ができたら、カバレッジのために複数のテストケースに拡大してください。

### 推奨テストアプローチ

初期の経験に基づき、効果的なスキルテストは通常3つの領域をカバーします：

#### 1. トリガーテスト

**目標：** スキルが適切なタイミングで読み込まれることを確認。

**テストケース：**

- ✅ 明確なタスクでトリガーされる
- ✅ 言い換えたリクエストでトリガーされる
- ❌ 無関係なトピックではトリガーされない

**テストスイートの例：**

```
トリガーすべき：
- "ProjectHubの新しいワークスペースをセットアップして"
- "ProjectHubでプロジェクトを作成する必要がある"
- "Q4計画用にProjectHubプロジェクトを初期化して"

トリガーすべきでない：
- "サンフランシスコの天気は？"
- "Pythonコードを書くのを手伝って"
- "スプレッドシートを作成"（ProjectHubスキルがシートを扱わない限り）
```

#### 2. 機能テスト

**目標：** スキルが正しい出力を生成することを検証。

**テストケース：**

- 有効な出力が生成される
- API呼び出しが成功する
- エラーハンドリングが動作する
- エッジケースがカバーされている

**例：**

```
テスト：5つのタスクでプロジェクトを作成
Given: プロジェクト名 "Q4 Planning"、5つのタスク説明
When: スキルがワークフローを実行
Then:
  - ProjectHubにプロジェクト作成
  - 正しいプロパティで5つのタスク作成
  - すべてのタスクがプロジェクトにリンク
  - APIエラーなし
```

#### 3. パフォーマンス比較

**目標：** スキルがベースラインに対して結果を改善することを証明。

「成功基準の定義」のメトリクスを使用します。比較は以下のようになります：

```
ベースライン比較：

スキルなし：
- ユーザーが毎回指示を提供
- 15回のやり取り
- 3回のAPI呼び出し失敗（リトライ必要）
- 12,000トークン消費

スキルあり：
- 自動ワークフロー実行
- 確認質問2回のみ
- API呼び出し失敗0回
- 6,000トークン消費
```

### skill-creatorスキルの使用

skill-creatorスキル—Claude.aiのプラグインディレクトリで利用可能、またはClaude Code用にダウンロード可能—は、スキルの構築とイテレーションを支援します。MCPサーバーがあり、上位2〜3のワークフローを把握していれば、1回の作業セッションで機能するスキルを構築しテストできます—通常15〜30分で。

**スキルの作成：**

- 自然言語の説明からスキルを生成
- フロントマター付きの適切なフォーマットのSKILL.mdを生成
- トリガーフレーズと構造を提案

**スキルのレビュー：**

- 一般的な問題をフラグ（曖昧な説明、トリガー不足、構造的問題）
- 過剰/不足トリガーのリスクを特定
- スキルの目的に基づいてテストケースを提案

**反復的改善：**

- スキルを使用してエッジケースや失敗に遭遇した後、それらの例をskill-creatorに持ち込む
- 例：「このチャットで特定された問題と解決策を使って、スキルが[特定のエッジケース]を処理する方法を改善して」

**使い方：**

```
"skill-creatorスキルを使って、[ユースケース]のためのスキルを構築するのを手伝って"
```

**注：** skill-creatorはスキルの設計と改良を支援しますが、自動テストスイートの実行や定量的評価結果の生成は行いません。

### フィードバックに基づくイテレーション

スキルは生きたドキュメントです。以下に基づいてイテレーションを計画してください：

**アンダートリガーの兆候：**

- スキルがすべきときに読み込まれない
- ユーザーが手動で有効化している
- いつ使うかについてのサポート質問

**解決策：** descriptionにより多くの詳細とニュアンスを追加—特に技術用語のキーワードを含める

**オーバートリガーの兆候：**

- 無関係なクエリでスキルが読み込まれる
- ユーザーがスキルを無効化している
- 目的についての混乱

**解決策：** ネガティブトリガーを追加し、より具体的にする

**実行の問題：**

- 結果が不安定
- API呼び出しの失敗
- ユーザーの修正が必要

**解決策：** 指示を改善し、エラーハンドリングを追加

---

## 第4章　配布と共有

スキルはMCPインテグレーションをより完全にします。ユーザーがコネクターを比較する際、スキルを持つものはより速く価値に到達できるパスを提供し、MCP単独の代替手段よりも優位性を持ちます。

### 現在の配布モデル（2026年1月）

**個人ユーザーがスキルを取得する方法：**

1. スキルフォルダをダウンロード
2. フォルダをZip圧縮（必要に応じて）
3. Claude.aiの 設定 > 機能 > スキル からアップロード
4. またはClaude Codeのスキルディレクトリに配置

**組織レベルのスキル：**

- 管理者がワークスペース全体にスキルをデプロイ可能（2025年12月18日出荷）
- 自動更新
- 集中管理

### オープンスタンダード

エージェントスキルをオープンスタンダードとして公開しました。MCPと同様に、スキルはツールやプラットフォーム間で移植可能であるべきだと考えています—Claudeを使用していても他のAIプラットフォームを使用していても、同じスキルが動作すべきです。とはいえ、一部のスキルは特定のプラットフォームの機能を最大限に活用するよう設計されています；著者はスキルの `compatibility` フィールドにその旨を記載できます。エコシステムのメンバーと標準について協力しており、早期の採用に興奮しています。

### API経由でのスキル使用

プログラマティックなユースケース—アプリケーション、エージェント、スキルを活用する自動化ワークフローの構築—では、APIがスキル管理と実行の直接的な制御を提供します。

**主要な機能：**

- `/v1/skills` エンドポイントによるスキルの一覧表示と管理
- `container.skills` パラメータ経由でMessages APIリクエストにスキルを追加
- Claude Consoleによるバージョン管理と管理
- カスタムエージェント構築のためのClaude Agent SDKとの連携

**APIとClaude.aiの使い分け：**

| ユースケース | 最適なサーフェス |
|---|---|
| エンドユーザーが直接スキルと対話 | Claude.ai / Claude Code |
| 開発中の手動テストとイテレーション | Claude.ai / Claude Code |
| 個人的なアドホックワークフロー | Claude.ai / Claude Code |
| アプリケーションがプログラマティックに使用 | API |
| 大規模な本番デプロイメント | API |
| 自動パイプラインとエージェントシステム | API |

**注：** APIでのスキルにはコード実行ツールベータが必要で、スキルの実行に必要なセキュアな環境を提供します。

**実装の詳細については以下を参照：**

- Skills API クイックスタート
- カスタムスキルの作成
- Agent SDKでのスキル

### 現在の推奨アプローチ

まずGitHubでスキルをホスティングし、明確なREADME（人間の訪問者向け—スキルフォルダとは別で、README.mdを含んではいけません）、スクリーンショット付きの使用例を用意してください。その後、MCPドキュメントにスキルへのリンク、両者を併用する価値の説明、クイックスタートガイドのセクションを追加してください。

**1. GitHubでホスティング**

- オープンソーススキル用のパブリックリポジトリ
- インストール手順を含む明確なREADME
- 使用例とスクリーンショット

**2. MCPリポジトリにドキュメント**

- MCPドキュメントからスキルへのリンク
- 両者併用の価値を説明
- クイックスタートガイドを提供

**3. インストールガイドの作成**

```markdown
# [サービス名]スキルのインストール

1. スキルをダウンロード：
   - リポジトリクローン：`git clone https://github.com/yourcompany/skills`
   - またはReleasesからZIPをダウンロード

2. Claudeにインストール：
   - Claude.ai > 設定 > スキル を開く
   - 「スキルをアップロード」をクリック
   - スキルフォルダ（zip済み）を選択

3. スキルを有効化：
   - [サービス名]スキルをオンに切り替え
   - MCPサーバーが接続されていることを確認

4. テスト：
   - Claudeに聞く：「[サービス名]で新しいプロジェクトをセットアップして」
```

### スキルのポジショニング

スキルの説明方法が、ユーザーがその価値を理解し実際に試すかどうかを決定します。README、ドキュメント、マーケティングでスキルについて書く際は、これらの原則を念頭に置いてください。

**機能ではなく成果にフォーカス：**

```
✅ Good:
"ProjectHubスキルにより、チームは手動セットアップに30分かける代わりに、
数秒で完全なプロジェクトワークスペースを—ページ、データベース、
テンプレートを含めて—セットアップできます。"

❌ Bad:
"ProjectHubスキルは、MCPサーバーツールを呼び出すYAMLフロントマターと
Markdown指示を含むフォルダです。"
```

**MCP + スキルのストーリーを強調：**

> 「MCPサーバーはClaudeにLinearプロジェクトへのアクセスを提供します。スキルはClaudeにチームのスプリント計画ワークフローを教えます。両者が組み合わさることで、AI駆動のプロジェクト管理が可能になります。」

---

## 第5章　パターンとトラブルシューティング

これらのパターンは、アーリーアダプターと社内チームが作成したスキルから生まれました。規範的なテンプレートではなく、効果的だった一般的なアプローチを表しています。

### アプローチの選択：問題ファースト vs. ツールファースト

ホームセンター（Home Depot）のように考えてください。「キッチンキャビネットを直したい」という問題を持って入店し、店員が適切なツールを教えてくれるかもしれません。あるいは新しいドリルを選んで、特定の作業にどう使うか尋ねるかもしれません。

スキルも同じように動作します：

- **問題ファースト：**「プロジェクトワークスペースをセットアップしたい」→ スキルが正しい順序で適切なMCP呼び出しをオーケストレーション。ユーザーは成果を説明し、スキルがツールを処理。
- **ツールファースト：**「Notion MCPを接続した」→ スキルがClaudeに最適なワークフローとベストプラクティスを教える。ユーザーはアクセスを持ち、スキルが専門知識を提供。

ほとんどのスキルはどちらかに傾きます。自分のユースケースにどちらのフレーミングが合うかを知ることで、以下の適切なパターンを選べます。

### パターン1：シーケンシャルワークフローオーケストレーション

**用途：** ユーザーが特定の順序でマルチステッププロセスを必要とする場合。

**構造の例：**

```markdown
# ワークフロー：新規顧客オンボーディング

# Step 1: アカウント作成
MCPツール呼び出し: `create_customer`
パラメータ: name, email, company

# Step 2: 支払いセットアップ
MCPツール呼び出し: `setup_payment_method`
待機: 支払い方法の検証

# Step 3: サブスクリプション作成
MCPツール呼び出し: `create_subscription`
パラメータ: plan_id, customer_id (Step 1から)

# Step 4: ウェルカムメール送信
MCPツール呼び出し: `send_email`
テンプレート: welcome_email_template
```

**主要なテクニック：**

- 明示的なステップ順序
- ステップ間の依存関係
- 各段階でのバリデーション
- 失敗時のロールバック指示

### パターン2：マルチMCPコーディネーション

**用途：** ワークフローが複数のサービスにまたがる場合。

**例：デザインから開発へのハンドオフ**

```markdown
# Phase 1: デザインエクスポート (Figma MCP)
1. Figmaからデザインアセットをエクスポート
2. デザイン仕様を生成
3. アセットマニフェストを作成

# Phase 2: アセットストレージ (Drive MCP)
1. Driveにプロジェクトフォルダを作成
2. すべてのアセットをアップロード
3. 共有リンクを生成

# Phase 3: タスク作成 (Linear MCP)
1. 開発タスクを作成
2. タスクにアセットリンクを添付
3. エンジニアリングチームに割り当て

# Phase 4: 通知 (Slack MCP)
1. #engineeringにハンドオフサマリーを投稿
2. アセットリンクとタスク参照を含める
```

**主要なテクニック：**

- 明確なフェーズ分離
- MCP間のデータパッシング
- 次のフェーズに移る前のバリデーション
- 集中的なエラーハンドリング

### パターン3：反復的改良

**用途：** イテレーションで出力品質が向上する場合。

**例：レポート生成**

```markdown
# 反復的レポート作成

# 初期ドラフト
1. MCP経由でデータを取得
2. 最初のドラフトレポートを生成
3. 一時ファイルに保存

# 品質チェック
1. バリデーションスクリプトを実行: `scripts/check_report.py`
2. 問題を特定:
   - セクションの欠落
   - フォーマットの不一致
   - データバリデーションエラー

# 改良ループ
1. 特定された各問題に対処
2. 影響を受けたセクションを再生成
3. 再バリデーション
4. 品質閾値を満たすまで繰り返し

# 最終化
1. 最終フォーマットを適用
2. サマリーを生成
3. 最終版を保存
```

**主要なテクニック：**

- 明示的な品質基準
- 反復的改善
- バリデーションスクリプト
- イテレーションの停止タイミングの把握

### パターン4：コンテキスト対応のツール選択

**用途：** 同じ結果でもコンテキストによって異なるツールを使う場合。

**例：ファイルストレージ**

```markdown
# スマートファイルストレージ

# 判断ツリー
1. ファイルタイプとサイズをチェック
2. 最適な保存場所を決定:
   - 大きいファイル (>10MB): クラウドストレージMCP
   - コラボドキュメント: Notion/Docs MCP
   - コードファイル: GitHub MCP
   - 一時ファイル: ローカルストレージ

# ストレージ実行
判断に基づき:
- 適切なMCPツールを呼び出し
- サービス固有のメタデータを適用
- アクセスリンクを生成

# ユーザーにコンテキストを提供
そのストレージが選ばれた理由を説明
```

**主要なテクニック：**

- 明確な判断基準
- フォールバックオプション
- 選択の透明性

### パターン5：ドメイン固有のインテリジェンス

**用途：** スキルがツールアクセス以上の専門知識を追加する場合。

**例：金融コンプライアンス**

```markdown
# コンプライアンス付き決済処理

# 処理前（コンプライアンスチェック）
1. MCP経由で取引詳細を取得
2. コンプライアンスルールを適用:
   - 制裁リストのチェック
   - 管轄区域の許可を検証
   - リスクレベルの評価
3. コンプライアンス判断を文書化

# 処理
IF コンプライアンス合格:
  - 決済処理MCPツールを呼び出し
  - 適切な不正チェックを適用
  - 取引を処理
ELSE:
  - レビュー用にフラグ
  - コンプライアンスケースを作成

# 監査証跡
- すべてのコンプライアンスチェックを記録
- 処理判断を記録
- 監査レポートを生成
```

**主要なテクニック：**

- ロジックに埋め込まれたドメイン専門知識
- アクション前のコンプライアンス
- 包括的なドキュメント
- 明確なガバナンス

### トラブルシューティング

#### スキルがアップロードできない

**エラー：** 「アップロードしたフォルダにSKILL.mdが見つかりません」

**原因：** ファイル名が正確にSKILL.mdでない

**解決策：**

- `SKILL.md` にリネーム（大文字小文字を区別）
- `ls -la` で確認すると `SKILL.md` と表示されるべき

---

**エラー：** 「無効なフロントマター」

**原因：** YAMLフォーマットの問題

**よくある間違い：**

```yaml
# 間違い - 区切り文字がない
name: my-skill
description: Does things

# 間違い - 閉じていない引用符
name: my-skill
description: "Does things

# 正しい
---
name: my-skill
description: Does things
---
```

---

**エラー：** 「無効なスキル名」

**原因：** 名前にスペースまたは大文字がある

```yaml
# 間違い
name: My Cool Skill

# 正しい
name: my-cool-skill
```

#### スキルがトリガーされない

**症状：** スキルが自動的に読み込まれない

**修正：** descriptionフィールドを改訂してください。良い/悪い例については「descriptionフィールド」を参照。

**クイックチェックリスト：**

- 一般的すぎないか？（「プロジェクトを支援する」では機能しない）
- ユーザーが実際に言うトリガーフレーズを含んでいるか？
- 該当する場合、関連するファイルタイプに言及しているか？

**デバッグアプローチ：**

Claudeに聞く：「[スキル名]スキルはいつ使いますか？」Claudeがdescriptionを引用して返します。不足している部分に基づいて調整してください。

#### スキルが頻繁にトリガーされすぎる

**症状：** 無関係なクエリでスキルが読み込まれる

**解決策：**

**1. ネガティブトリガーを追加**

```yaml
description: CSVファイルの高度なデータ分析。統計モデリング、回帰、クラスタリングに使用。
  単純なデータ探索には使用しない（data-vizスキルを使用）。
```

**2. より具体的にする**

```yaml
# 広すぎる
description: ドキュメントを処理する

# より具体的
description: 契約レビュー用のPDF法務文書を処理する
```

**3. スコープを明確にする**

```yaml
description: eコマース向けPayFlow決済処理。オンライン決済ワークフロー専用で、
  一般的な財務クエリには使用しない。
```

#### MCP接続の問題

**症状：** スキルは読み込まれるがMCP呼び出しが失敗する

**チェックリスト：**

1. **MCPサーバーの接続を確認**
   - Claude.ai：設定 > 拡張機能 > [サービス]
   - 「接続済み」ステータスが表示されるべき

2. **認証を確認**
   - APIキーが有効で期限切れでないこと
   - 適切な権限/スコープが付与されていること
   - OAuthトークンが更新されていること

3. **MCPを単独でテスト**
   - スキルなしでClaudeに直接MCP呼び出しを依頼
   - 「[サービス]MCPを使って自分のプロジェクトを取得して」
   - これが失敗すれば、問題はスキルではなくMCP

4. **ツール名を確認**
   - スキルが正しいMCPツール名を参照しているか
   - MCPサーバーのドキュメントを確認
   - ツール名は大文字小文字を区別

#### 指示が守られない

**症状：** スキルは読み込まれるがClaudeが指示に従わない

**一般的な原因：**

**1. 指示が冗長すぎる**

- 指示を簡潔に保つ
- 箇条書きと番号リストを使用
- 詳細なリファレンスは別ファイルに移動

**2. 指示が埋もれている**

- 重要な指示はトップに配置
- `## Important` または `## Critical` ヘッダーを使用
- 必要に応じてキーポイントを繰り返す

**3. 曖昧な言葉遣い**

```
# Bad
適切にバリデーションすること

# Good
CRITICAL: create_projectを呼び出す前に確認：
- プロジェクト名が空でないこと
- 少なくとも1人のチームメンバーが割り当てられている
- 開始日が過去でないこと
```

> 💡 **上級テクニック：** 重要なバリデーションには、言語指示に頼るのではなく、プログラムでチェックを実行するスクリプトをバンドルすることを検討してください。コードは決定論的ですが、言語の解釈はそうではありません。Officeスキルにこのパターンの例があります。

**4. モデルの「怠慢」**

明示的な励ましを追加：

```markdown
# パフォーマンスノート
- 時間をかけて丁寧に行ってください
- スピードより品質が重要です
- バリデーションステップをスキップしないでください
```

**注：** これをSKILL.mdよりもユーザープロンプトに追加する方が効果的です。

#### 大規模コンテキストの問題

**症状：** スキルが遅く見える、または応答品質が低下

**原因：**

- スキルコンテンツが大きすぎる
- 同時に有効なスキルが多すぎる
- プログレッシブ・ディスクロージャーの代わりにすべてのコンテンツが読み込まれている

**解決策：**

**1. SKILL.mdサイズの最適化**

- 詳細なドキュメントを `references/` に移動
- インラインではなくリファレンスにリンク
- SKILL.mdを5,000語以下に保つ

**2. 有効なスキルの削減**

- 20〜50以上のスキルを同時に有効にしていないか評価
- 選択的な有効化を推奨
- 関連する機能のスキル「パック」を検討

---

## 第6章　リソースとリファレンス

初めてスキルを構築する場合は、まずベストプラクティスガイドから始めて、必要に応じてAPIドキュメントを参照してください。

### 公式ドキュメント

**Anthropicリソース：**

- ベストプラクティスガイド
- スキルドキュメント
- APIリファレンス
- MCPドキュメント

**ブログ記事：**

- Introducing Agent Skills
- Engineering Blog: Equipping Agents for the Real World
- Skills Explained
- How to Create Skills for Claude
- Building Skills for Claude Code
- Improving Frontend Design through Skills

### スキルの例

**公開スキルリポジトリ：**

- GitHub: [anthropics/skills](https://github.com/anthropics/skills)
- Anthropicが作成した、カスタマイズ可能なスキルが含まれています

### ツールとユーティリティ

**skill-creatorスキル：**

- Claude.aiに組み込まれ、Claude Code用にも利用可能
- 説明からスキルを生成可能
- レビューと推奨事項を提供
- 使い方：「skill-creatorを使ってスキルを構築するのを手伝って」

**バリデーション：**

- skill-creatorがスキルを評価可能
- 聞き方：「このスキルをレビューして改善点を提案して」

### サポートの取得

**技術的な質問：**

- 一般的な質問：Claude Developers Discordのコミュニティフォーラム

**バグレポート：**

- GitHub Issues: anthropics/skills/issues
- 含めるべき情報：スキル名、エラーメッセージ、再現手順

---

## リファレンスA：クイックチェックリスト

アップロードの前後にスキルを検証するためにこのチェックリストを使用してください。より速く開始したい場合は、skill-creatorスキルを使って最初のドラフトを生成し、このリストを使って何も見落としていないことを確認してください。

### 開始前

- [ ] 2〜3の具体的なユースケースを特定
- [ ] ツールを特定（組み込みまたはMCP）
- [ ] このガイドとスキル例をレビュー
- [ ] フォルダ構造を計画

### 開発中

- [ ] フォルダ名がケバブケース
- [ ] SKILL.mdファイルが存在（正確なスペル）
- [ ] YAMLフロントマターに `---` 区切り文字あり
- [ ] nameフィールド：ケバブケース、スペースなし、大文字なし
- [ ] descriptionに「何を」と「いつ」が含まれる
- [ ] XMLタグ（`<` `>`）がどこにもない
- [ ] 指示が明確で実用的
- [ ] エラーハンドリングが含まれている
- [ ] 例が提供されている
- [ ] リファレンスが明確にリンクされている

### アップロード前

- [ ] 明確なタスクでトリガーをテスト
- [ ] 言い換えたリクエストでトリガーをテスト
- [ ] 無関係なトピックでトリガーされないことを確認
- [ ] 機能テストに合格
- [ ] ツールインテグレーションが動作（該当する場合）
- [ ] `.zip` ファイルとして圧縮

### アップロード後

- [ ] 実際の会話でテスト
- [ ] アンダー/オーバートリガーを監視
- [ ] ユーザーフィードバックを収集
- [ ] descriptionと指示をイテレーション
- [ ] メタデータのバージョンを更新

---

## リファレンスB：YAMLフロントマター

### 必須フィールド

```yaml
---
name: skill-name-in-kebab-case
description: 何をするか、いつ使うか。具体的なトリガーフレーズを含める。
---
```

### すべてのオプションフィールド

```yaml
name: skill-name
description: [必須の説明]
license: MIT                    # 任意: オープンソースのライセンス
allowed-tools: "Bash(python:*) Bash(npm:*) WebFetch"  # 任意: ツールアクセスの制限
metadata:                       # 任意: カスタムフィールド
  author: Company Name
  version: 1.0.0
  mcp-server: server-name
  category: productivity
  tags: [project-management, automation]
  documentation: https://example.com/docs
  support: support@example.com
```

### セキュリティノート

**許可されるもの：**

- 標準的なYAML型（文字列、数値、ブーリアン、リスト、オブジェクト）
- カスタムメタデータフィールド
- 長いdescription（1024文字まで）

**禁止されるもの：**

- XMLの山括弧（`<` `>`）— セキュリティ制限
- YAMLでのコード実行（安全なYAMLパースを使用）
- 「claude」または「anthropic」プレフィックスのスキル名（予約済み）

---

## リファレンスC：完全なスキル例

このガイドで紹介したパターンを実証する、完全な本番向けスキルについては以下を参照してください：

- **ドキュメントスキル** — PDF、DOCX、PPTX、XLSX作成
- **スキル例** — さまざまなワークフローパターン
- **パートナースキルディレクトリ** — Asana、Atlassian、Canva、Figma、Sentry、Zapierなど、さまざまなパートナーのスキルを閲覧

これらのリポジトリは最新の状態に保たれており、ここでカバーされている以上の追加例が含まれています。クローンし、ユースケースに合わせて修正し、テンプレートとして使用してください。

---
